@inject ISnackbar Snackbar
@inject IDbContextFactory<ApplicationDbContext> factory
@inject UserManager<ApplicationUser> UserManager
@inject AuthenticationStateProvider AuthenticationStateProvider

<TeamSelector @bind-SelectedTeam="SelectedTeam" Teams="Teams" />


@code {
    private IEnumerable<Team> Teams = [];
    private Team? SelectedTeam;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            Teams = (await factory.LoadUser(UserManager, AuthenticationStateProvider))
                .AthleteTeams
                .Select(t => t.Team);
            SelectedTeam = Teams.FirstOrDefault();
        }
        catch
        {
            Snackbar.Add("Failed to load the User's Teams.", Severity.Error);
        }
        StateHasChanged();
    }
}
